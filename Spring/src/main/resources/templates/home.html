<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org">
<head>
    <title>Potal Service API</title>
    <!-- 부트스트랩 CSS 파일 추가 -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <a class="navbar-brand" href="/home">Music Spleeter</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
        <ul class="navbar-nav">
            <li class="nav-item">
                <a sec:authorize="isAnonymous()"  class="nav-link" href="/login">로그인</a>
            </li>
            <li class="nav-item">
                <a sec:authorize="isAnonymous()" class="nav-link" href="/signup">회원가입</a>
            </li>
            <li class="nav-item">
                <a sec:authorize="!isAnonymous()" class="nav-link" href="/spleeter">기능</a>
            </li>
            <li class="nav-item">
                <a sec:authorize="!isAnonymous()" th:href="@{/logout}" class="nav-link">로그아웃</a>
            </li>
        </ul>
    </div>
</nav>

<div class="container mt-5">

    <h1 class="code-line" data-line-start=0 data-line-end=1 ><a id="Spleeter_Web_UI_0"></a>Spleeter Web UI</h1>
    <p class="has-line-data" data-line-start="2" data-line-end="3">본 프로젝트는 Spleeter를 이용하여 음악 파일에서 소리를 분리하는 기능을 웹에서 사용할 수 있도록 구현한 프로젝트입니다.</p>
    <h2 class="code-line" data-line-start=4 data-line-end=5 ><a id="__4"></a>프로젝트 소개</h2>
    <p class="has-line-data" data-line-start="6" data-line-end="7">본 프로젝트는 Python 라이브러리인 Spleeter를 이용하여 음악 파일에서 소리를 분리하는 기능을 웹에서 사용할 수 있도록 구현하였습니다. 사용자는 웹 페이지에서 음악 파일을 업로드하고, 분리하고자 하는 소리를 선택하여 분리 결과를 다운로드 받을 수 있습니다.</p>
    <h2 class="code-line" data-line-start=8 data-line-end=9 ><a id="_8"></a>개발환경</h2>
    <ul>
        <li class="has-line-data" data-line-start="10" data-line-end="11">Java 17</li>
        <li class="has-line-data" data-line-start="11" data-line-end="12">Spring Boot 2.7.8</li>
        <li class="has-line-data" data-line-start="12" data-line-end="13">Redis</li>
        <li class="has-line-data" data-line-start="13" data-line-end="14">Thymeleaf</li>
        <li class="has-line-data" data-line-start="14" data-line-end="15">Spring Security</li>
        <li class="has-line-data" data-line-start="15" data-line-end="16">Lombok</li>
        <li class="has-line-data" data-line-start="16" data-line-end="18">Gradle</li>
    </ul>
    <h2 class="code-line" data-line-start=18 data-line-end=19 ><a id="__18"></a>프로젝트 구조</h2>
    <ul>
        <li class="has-line-data" data-line-start="20" data-line-end="32">
<pre><code class="has-line-data" data-line-start="21" data-line-end="23">src/main/java
</code></pre>
            <ul>
                <li class="has-line-data" data-line-start="24" data-line-end="25"><code>acc.web</code> : web 컨트롤러 라우팅 클래스</li>
                <li class="has-line-data" data-line-start="25" data-line-end="26"><code>acc.security</code> : 보안 관련 설정 클래스</li>
                <li class="has-line-data" data-line-start="26" data-line-end="27"><code>acc.security.user</code> : 사용자 정보와 역할 정보를 다루는 모델 클래스</li>
                <li class="has-line-data" data-line-start="27" data-line-end="28"><code>acc.security.user.enums</code> : 사용자 역할 정보를 담은 enum 클래스</li>
                <li class="has-line-data" data-line-start="28" data-line-end="29"><code>acc.security.user.service</code> : 사용자 정보 로딩 및 인증을 담당하는 서비스 클래스</li>
                <li class="has-line-data" data-line-start="29" data-line-end="30"><code>acc.security.config</code> : 보안 설정 클래스</li>
                <li class="has-line-data" data-line-start="30" data-line-end="32"><code>acc.security.config.security</code> : 스프링 시큐리티 설정 클래스</li>
            </ul>
        </li>
        <li class="has-line-data" data-line-start="32" data-line-end="41">
<pre><code class="has-line-data" data-line-start="33" data-line-end="35">src/main/resources
</code></pre>
            <ul>
                <li class="has-line-data" data-line-start="36" data-line-end="37"><code>application.yml</code> : 프로젝트 설정 파일</li>
                <li class="has-line-data" data-line-start="37" data-line-end="38"><code>data.sql</code> : 예시 데이터 삽입 SQL 파일</li>
                <li class="has-line-data" data-line-start="38" data-line-end="39"><code>schema.sql</code> : DDL 파일</li>
                <li class="has-line-data" data-line-start="39" data-line-end="41"><code>templates</code> : 뷰 템플릿 폴더</li>
            </ul>
        </li>
    </ul>
    <h2 class="code-line" data-line-start=41 data-line-end=42 ><a id="____41"></a>빌드 및 실행 방법</h2>
    <ul>
        <li class="has-line-data" data-line-start="43" data-line-end="44"><code>./gradlew build</code> : 빌드</li>
        <li class="has-line-data" data-line-start="44" data-line-end="46"><code>java -jar build/libs/spleeter-web-ui.jar</code> : 실행</li>
    </ul>
    <h2 class="code-line" data-line-start=46 data-line-end=47 ><a id="_46"></a>기타</h2>
    <ul>
        <li class="has-line-data" data-line-start="48" data-line-end="49">프로젝트는 local 환경에서 테스트 되어 있으며, 배포할시 뷰 템플릿을 수정해야합니다</li>
        <li class="has-line-data" data-line-start="49" data-line-end="51">개발 의존성에 자세한 사항은 <code>build.gradle</code>을 참고하세요</li>
    </ul>


    <hr>

    <h1 class="mb-4">Potal Service API</h1>

    <p>프로젝트는 대학 과제용으로 시작된 API 서비스 프로젝트입니다. 모든 코드는 main.py 파일에 작성되어 있으며, FastAPI 프레임워크를 사용하여 API 서비스를 구현하였습니다.</p>

    <h2>개발 환경</h2>
    <ul>
        <li>Python 3.8</li>
        <li>requirements.txt</li>
    </ul>

    <h2>설치 및 실행 방법</h2>
    <ol>
        <li>저장소를 클론합니다.</li>
        <li>파이썬 가상환경 설정(3.8)</li>
        <li>의존성 설치</li>
        <li>프로젝트 실행 (uvicorn 사용)</li>
        <li>localhost/docs 를 통해 API 테스트</li>
    </ol>

    <h2>코드 요약 설명</h2>
    <p>위 코드는 FastAPI와 Spleeter를 사용하여 음원 분리 API를 구현하는 예시입니다.</p>

    <p>FastAPI는 웹 애플리케이션을 쉽게 만들 수 있도록 도와주는 Python 웹 프레임워크이며, Spleeter는 딥 러닝 기반의 음원 분리 라이브러리입니다.</p>

    <p>이 예제에서는 /audio API 엔드포인트를 통해 음원 파일을 업로드하고, Spleeter를 사용하여 분리된 음원을 생성합니다. 분리된 음원은 /output API 엔드포인트를 통해 다운로드할 수 있습니다.</p>

    <p>다음은 각 함수의 역할에 대한 간단한 설명입니다.</p>
    <ul>
        <li>audio: POST 요청을 처리하는 함수로, 업로드된 음원 파일을 분리하여 저장하고, 분리된 음원 파일의 다운로드 링크를 반환합니다.</li>
        <li>get_audio: GET 요청을 처리하는 함수로, 분리된 음원 파일을 다운로드할 때 사용합니다.</li>
        <li>model_name: 사용할 Spleeter 분리 모델을 지정하는 변수입니다.</li>
        <li>separator: 지정된 분리 모델을 로드하는 객체입니다.</li>
        <li>output_dir: 분리된 음원 파일을 저장할 디렉토리 경로입니다.</li>
    </ul>

    <p>이 예시 코드는 다음과 같은 순서로 동작합니다.</p>
    <ol>
        <li>audio 함수가 POST 요청을 받아 음원 파일을 저장하고, Spleeter를 사용하여 분리된 음원 파일을 생성합니다.</li>
        <li>생성된 분리된 음원 파일의 다운로드 링크를 반환합니다.</li>
        <li>get_audio 함수가 GET 요청을 받아 분리된 음원 파일을 전송합니다.</li>
    </ol>

    <p>이 코드를 실행하려면, FastAPI와 Spleeter를 설치하고, Python 파일을 실행하면 됩니다. 또한, output_dir 변수에 지정된 경로에 쓰기 권한이 있어야 합니다.</p>

    <p>이 코드를 참고하여, FastAPI와 Spleeter를 사용하여 음원 분리 기능을 구현하는 데 도움이 되길 바랍니다.</p>
</div>

<!-- 부트스트랩 JS 파일 추가 -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>